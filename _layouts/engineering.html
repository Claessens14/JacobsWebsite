<!DOCTYPE html>
<html lang="en">

{% include head.html %}

<body>

  {% if site.google-analytics %}
    {% include google-analytics.html %}
  {% endif %}
  {% include loader.html %}
  {% include header.html %}

  
  <h1>Engineering</h1>
   <p style="color: red;">Please use Google Chrome for the best experience.</p>
   <!--
  <p>
    <a href="https://www.quickpicturetools.com/en/combine_images/">image joiner</a><br>
    <a href="https://postimages.org">image hosting</a><br>
    <a href="https://htmlcheatsheet.com">cheat sheet</a>
  </p> -->
  <!-- <script src="https://unpkg.com/gojs/release/go-debug.js"></script> -->
  <link rel='stylesheet' href='https://gojs.net/latest/extensions/DataInspector.css' />
  <script src="https://gojs.net/latest/extensions/DataInspector.js"></script>
  <script src="https://gojs.net/latest/extensions/GuidedDraggingTool.js"></script>
    
  <!-- <script language="JavaScript" type="text/javascript" src="/js/jquery-1.2.6.min.js"></script>
  <script language="JavaScript" type="text/javascript" src="/js/jquery-ui-personalized-1.5.2.packed.js"></script>
  <script language="JavaScript" type="text/javascript" src="/js/sprinkle.js"></script> -->
  <!-- <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script> -->
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.2.6/ace.js" type="text/javascript" charset="utf-8"></script>    
  
  <!-- <link rel="stylesheet" type="text/css" href="/assets/css/popup.css"> --> 
  
  <!-- <link rel="stylesheet" href="{{ site.baseurl }}/assets/popup_assets_cp/stylesheets/magnific-popup.css">
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script src="{{ site.baseurl }}/assets/popup_assets_cp/javascripts/magnific-popup.js"></script> -->
  
  <div id="sample">
    <span>
      <div class="mapping" style="width: 100%; display: flex; justify-content: space-between">
        <!-- display: none; -->
        <div id="myPaletteDiv" style="width: 100px; margin-right: 2px; background-color: #565e70;"></div>
  
        <div id="myDiagramDiv" style="flex-grow: 1; width: 100%; background-size: 100%; height: 750px; background-color: #cdcfd3;"></div>
        <!-- <div id="myDiagramDiv" style="flex-grow: 1; height: 750px;   background-repeat: no-repeat;
        background-size: 100%;
        background-position: center;  background-image: url({{"/img/" | prepend: site.baseurl | append : page.image}})"></div>
        </div> -->
        <!-- <div id="map" class="mapDiagram">
          <div id="myDiagramDiv" class="mapDiagram" style="width: 0px; margin-right: 2px; background-color: #565e70;"></div>
        </div> -->
      </div>
    </span>
  
    <p>
      <button id="zoomToFit" class="w3-button w3-round w3-indigo w3-small">Zoom to Fit</button>
    </p>
  
    <span style="display: inline-block; vertical-align: top;">
      Selected Part:
      <br>
    <div id="myInspectorDiv" class="inspector"> </div>
      
        <!-- First Node's data:<br>
        <div id="myInspectorDiv2" class="inspector"> </div><br>
        Model.modelData:<br>
        <div id="myInspectorDiv3" class="inspector"> </div><br> -->
    </span>
    <br>
    <!-- <p><button class="w3-button w3-round w3-indigo w3-small">Indigo</button></p>
      <p><button class="w3-button w3-round w3-indigo w3-small" disabled>Indigo</button></p> -->
    <button id="SaveButton" class="w3-button w3-round w3-indigo w3-small" onclick="save()">Save</button>
    <button class="w3-button w3-round w3-indigo w3-small" onclick="load()" >Load</button>
    Diagram Model saved in JSON format:
    <!-- <textarea id="mySavedModel" style="width:100%;height:600px;background-color:black;color:white;">
    </textarea> -->
    <div id="editor" style="width:100%;height:600px">
      function foo(items) {
        var x = "All this is syntax highlighted";
        return x;
        }
    </div>
    <button class="w3-button w3-round w3-indigo w3-small" onclick="printDiagram()">Print Diagram Using SVG</button>
  </div>
  
  
  <script>
    var editor = ace.edit("editor");
    var myDiagram;
    var myPalette;
    $(document).ready(function() {
      window.onbeforeunload = function(){
        return 'Are you sure you want to leave, changes will be lost unless saved to JSON?';
      };
  
      document.getElementById('zoomToFit').addEventListener('click', function() {
        myDiagram.commandHandler.zoomToFit();
      });
  
      function init() {
        //if (window.goSamples) goSamples();  // init for these samples -- you don't need to call this
        var Go = go.GraphObject.make;  // for conciseness in defining templates
  
        myDiagram =
          Go(go.Diagram, "myDiagramDiv",  // must name or refer to the DIV HTML element
            {
              "LinkDrawn": showLinkLabel,  // this DiagramEvent listener is defined below
              "LinkRelinked": showLinkLabel,
              draggingTool: new GuidedDraggingTool(),  // defined in GuidedDraggingTool.js
              "draggingTool.horizontalGuidelineColor": "blue",
              "draggingTool.verticalGuidelineColor": "blue",
              "draggingTool.centerGuidelineColor": "green",
              "draggingTool.guidelineWidth": 0.7,
              // allow Ctrl-G to call groupSelection()
              "commandHandler.archetypeGroupData": { text: "Group", isGroup: true, color: "#566B70" },
              "undoManager.isEnabled": true,  // enable undo & redo
  
              "dragSelectingTool.isEnabled": false,
              "animationManager.isEnabled": false,
              scrollMode: go.Diagram.InfiniteScroll,
              allowZoom: false,
              allowHorizontalScroll: false,
              allowVerticalScroll: false,
              hasHorizontalScrollbar: false,
              hasVerticalScrollbar: false,
              initialPosition: new go.Point(0, 0),
              padding: 0,
              "toolManager.hoverDelay": 100  // how quickly tooltips are shown
            }
          );
  
        var toolTipTemplate =
        Go("ToolTip",
          Go(go.TextBlock, { margin: 4 },
            new go.Binding("text", "", function(d) {
              return d.key + "\nlocation: [" + d.latlong.join(", ") + "]"
            }))
        );
  
        // when the document is modified, add a "*" to the title and enable the "Save" button
        myDiagram.addDiagramListener("Modified", function(e) {
          var button = document.getElementById("SaveButton");
          if (button) button.disabled = !myDiagram.isModified;
          var idx = document.title.indexOf("*");
          if (myDiagram.isModified) {
            if (idx < 0) document.title += "*";
          } else {
            if (idx >= 0) document.title = document.title.substr(0, idx);
          }
        });
  
        // helper definitions for node templates
        function nodeStyle() {
          return [
            // The Node.location comes from the "loc" property of the node data,
            // converted by the Point.parse static method.
            // If the Node.location is changed, it updates the "loc" property of the node data,
            // converting back using the Point.stringify static method.
            new go.Binding("location", "loc", go.Point.parse).makeTwoWay(go.Point.stringify),
            {
              // the Node.location is at the center of each node
              locationSpot: go.Spot.Center
            }
          ];
        }
  
        // Define a function for creating a "port" that is normally transparent.
        // The "name" is used as the GraphObject.portId,
        // the "align" is used to determine where to position the port relative to the body of the node,
        // the "spot" is used to control how links connect with the port and whether the port
        // stretches along the side of the node,
        // and the boolean "output" and "input" arguments control whether the user can draw links from or to the port.
        function makePort(name, align, spot, output, input, no_mouse_colour_bool=false) {
          var horizontal = align.equals(go.Spot.Top) || align.equals(go.Spot.Bottom);
          // the port is basically just a transparent rectangle that stretches along the side of the node,
          // and becomes colored when the mouse passes over it
          return Go(go.Shape,
            {
              fill: "transparent",  // changed to a color in the mouseEnter event handler
              strokeWidth: 0,  // no stroke
              width: horizontal ? NaN : 8,  // if not stretching horizontally, just 8 wide
              height: !horizontal ? NaN : 8,  // if not stretching vertically, just 8 tall
              alignment: align,  // align the port on the main Shape
              stretch: (horizontal ? go.GraphObject.Horizontal : go.GraphObject.Vertical),
              portId: name,  // declare this object to be a "port"
              fromSpot: spot,  // declare where links may connect at this port
              fromLinkable: output,  // declare whether the user may draw links from here
              toSpot: spot,  // declare where links may connect at this port
              toLinkable: input,  // declare whether the user may draw links to here
              cursor: "pointer",  // show a different cursor to indicate potential link point
              mouseEnter: function(e, port) {  // the PORT argument will be this Shape
                // TODO - add image black notice
                if (!e.diagram.isReadOnly && !no_mouse_colour_bool) port.fill = "rgba(255,0,255,0.5)";
              },
              mouseLeave: function(e, port) {
                port.fill = "transparent";
              }
            }
          );
        }
  
        function textStyle() {
          return {
            font: "bold 11pt Lato, Helvetica, Arial, sans-serif",
            stroke: "#F8F8F8"
          }
        }
  
        // define the Node templates for regular nodes
        myDiagram.nodeTemplateMap.add("",  // the default category
          Go(go.Node, "Table", nodeStyle(),
            // the main object is a Panel that surrounds a TextBlock with a rectangular Shape
            Go(go.Panel, "Auto",
              Go(go.Shape, "RoundedRectangle",
                { fill: "#8b8f99", stroke: "#00A9C9", strokeWidth: 1 },
                new go.Binding("figure").makeTwoWay(),
                new go.Binding("fill"),
                new go.Binding("stroke", "edge_stroke")),
              Go(go.TextBlock, textStyle(),
                {
                  margin: 8,
                  maxSize: new go.Size(160, NaN),
                  wrap: go.TextBlock.WrapFit,
                  editable: true
                },
                new go.Binding("stroke", "font_stroke"),
                new go.Binding("text").makeTwoWay())
            ),
            // four named ports, one on each side:
            makePort("T", go.Spot.Top, go.Spot.TopSide, false, true),
            makePort("L", go.Spot.Left, go.Spot.LeftSide, true, true),
            makePort("R", go.Spot.Right, go.Spot.RightSide, true, true),
            makePort("B", go.Spot.Bottom, go.Spot.BottomSide, true, false)
          )
        );
  
        myDiagram.nodeTemplateMap.add("RedText",  // the default category
          Go(go.Node, "Table", nodeStyle(),
            // the main object is a Panel that surrounds a TextBlock with a rectangular Shape
            Go(go.Panel, "Auto",
              Go(go.Shape, "RoundedRectangle",
                { fill: "#8b8f99", stroke: "#dd3218", strokeWidth: 3 },
                new go.Binding("figure").makeTwoWay(),
                new go.Binding("fill"),
                new go.Binding("stroke", "edge_stroke")),
              Go(go.TextBlock, textStyle(),
                {
                  margin: 8,
                  maxSize: new go.Size(160, NaN),
                  wrap: go.TextBlock.WrapFit,
                  editable: true
                },
                new go.Binding("stroke", "font_stroke"),
                new go.Binding("text").makeTwoWay())
            ),
            // four named ports, one on each side:
            makePort("T", go.Spot.Top, go.Spot.TopSide, true, true),
            makePort("L", go.Spot.Left, go.Spot.LeftSide, true, true),
            makePort("R", go.Spot.Right, go.Spot.RightSide, true, true),
            makePort("B", go.Spot.Bottom, go.Spot.BottomSide, true, true)
          )
        );
  
        var media_click = (e, obj) => { 
          //showMessage("Clicked on " + obj.part.data.key); 
          // if (obj.part.data.category == "ImageBlock" && obj.part.data.source)
          console.log(obj.part.data)  
          const diag = JSON.parse(myDiagram.model.toJson());
          var nodes = diag.nodeDataArray;
          
          // INPUT
          // obj.part.data -> data
          // nodes[i] -> data
          function makeItem(data) {
            if (data && data.video_source && data.video_source.match(/youtube||vimeo||bitchute/g)) {
              return {
                src: data.video_source,
                type: 'iframe'
              }
            } 
            return {
              src: data.source,
              type: 'image'
            }
          }
          var items_arr = [makeItem(obj.part.data)];
          var title = ""
          for (var i = 0; i < nodes.length; i++) {
            if (nodes[i] && nodes[i]['key'] == obj.part.data.group)
              title = nodes[i]['text']
            if (nodes[i] && (nodes[i]['category'] == "ImageBlock" || nodes[i]['category'] == "VideoBlock") && nodes[i]['group'] == obj.part.data.group && (nodes[i]['source'] || nodes[i]['video_source'])) {
              items_arr.push(makeItem(nodes[i]))
            }
          }
          for (var i = 0; i < items_arr.length; i++) {
            items_arr[i]['title'] = title
          }
  
          $.magnificPopup.open({
            items: items_arr,
            gallery: {
              enabled: true
            },
            type: 'image' // this is default type
          });
        }
  
        myDiagram.nodeTemplateMap.add("ImageBlock",  // the default category
          Go(go.Node, "Table", nodeStyle(),
            // the main object is a Panel that surrounds a TextBlock with a rectangular Shape
            Go(go.Panel, "Auto",
              Go(go.Shape, "RoundedRectangle",
                { fill: "#282c34", stroke: "#00A9C9", strokeWidth: 0.01 },
                new go.Binding("figure", "figure"),
                new go.Binding("fill"),
                new go.Binding("stroke", "edge_stroke")),
              Go(go.TextBlock, textStyle(),
                {
                  margin: 8,
                  maxSize: new go.Size(160, NaN),
                  wrap: go.TextBlock.WrapFit,
                  editable: true
                },
                  new go.Binding("stroke", "font_stroke"),
                  new go.Binding("text").makeTwoWay()),
                Go(go.Picture,
                  { margin: 0, width: 30, height: 30, background: "#354D8F" },
                  new go.Binding("source").makeTwoWay()),
                {
                  click: function(e, obj) {
                      media_click(e, obj)
                  }
                }
            ),
            // four named ports, one on each side:
            makePort("T", go.Spot.Top, go.Spot.TopSide, true, true, no_mouse_colour_bool=true),
            makePort("L", go.Spot.Left, go.Spot.LeftSide, true, true, no_mouse_colour_bool=true),
            makePort("R", go.Spot.Right, go.Spot.RightSide, true, true, no_mouse_colour_bool=true),
            makePort("B", go.Spot.Bottom, go.Spot.BottomSide, true, true, no_mouse_colour_bool=true)
          )
        );
  
        myDiagram.nodeTemplateMap.add("VideoBlock",  // the default category
          Go(go.Node, "Table", nodeStyle(),
            // the main object is a Panel that surrounds a TextBlock with a rectangular Shape
            Go(go.Panel, "Auto",
              Go(go.Shape, "RoundedRectangle",
                { fill: "#282c34", stroke: "#00A9C9", strokeWidth: 0.01 },
                new go.Binding("figure", "figure"),
                new go.Binding("fill"),
                new go.Binding("stroke", "edge_stroke")),
              Go(go.TextBlock, textStyle(),
                {
                  margin: 8,
                  maxSize: new go.Size(160, NaN),
                  wrap: go.TextBlock.WrapFit,
                  editable: true
                },
                  new go.Binding("stroke", "font_stroke"),
                  new go.Binding("text").makeTwoWay()),
                Go(go.Picture,
                  { margin: 0, width: 30, height: 30, background: "#354D8F", source: "https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fbanner2.kisspng.com%2F20180410%2Fjfe%2Fkisspng-youtube-play-button-computer-icons-clip-art-youtube-5acd2517807855.3866683515233938155262.jpg&f=1&nofb=1" },
                  new go.Binding("source").makeTwoWay()),
                {
                  click: function(e, obj) {
                    media_click(e, obj)
                  }
                }
            ),
            // four named ports, one on each side:
            makePort("T", go.Spot.Top, go.Spot.TopSide, true, true, no_mouse_colour_bool=true),
            makePort("L", go.Spot.Left, go.Spot.LeftSide, true, true, no_mouse_colour_bool=true),
            makePort("R", go.Spot.Right, go.Spot.RightSide, true, true, no_mouse_colour_bool=true),
            makePort("B", go.Spot.Bottom, go.Spot.BottomSide, true, true, no_mouse_colour_bool=true)
          )
        );
  
        myDiagram.nodeTemplateMap.add("Start",
          Go(go.Node, "Table", nodeStyle(),
            Go(go.Panel, "Spot",
              Go(go.Shape, "Circle",
                { desiredSize: new go.Size(80, 80), fill: "#282c34", stroke: "#09d3ac", strokeWidth: 3.5 }),
              Go(go.TextBlock, "Start", textStyle(),
                new go.Binding("text"))
            ),
            makePort("T", go.Spot.Top, go.Spot.TopSide, true, true),
            makePort("L", go.Spot.Left, go.Spot.Left, true, true),
            makePort("R", go.Spot.Right, go.Spot.Right, true, true),
            makePort("B", go.Spot.Bottom, go.Spot.Bottom, true, true)
          )
        );
  
        // taken from ../extensions/Figures.js:
        go.Shape.defineFigureGenerator("File", function(shape, w, h) {
            var geo = new go.Geometry();
            var fig = new go.PathFigure(0, 0, true); // starting point
            geo.add(fig);
            fig.add(new go.PathSegment(go.PathSegment.Line, .75 * w, 0));
            fig.add(new go.PathSegment(go.PathSegment.Line, w, .25 * h));
            fig.add(new go.PathSegment(go.PathSegment.Line, w, h));
            fig.add(new go.PathSegment(go.PathSegment.Line, 0, h).close());
            var fig2 = new go.PathFigure(.75 * w, 0, false);
            geo.add(fig2);
            // The Fold
            fig2.add(new go.PathSegment(go.PathSegment.Line, .75 * w, .25 * h));
            fig2.add(new go.PathSegment(go.PathSegment.Line, w, .25 * h));
            geo.spot1 = new go.Spot(0, .25);
            geo.spot2 = go.Spot.BottomRight;
            return geo;
          }
        );
  
        myDiagram.nodeTemplateMap.add("Comment",
          Go(go.Node, "Auto", nodeStyle(),
            Go(go.Shape, "File",
              { fill: "#282c34", stroke: "#DEE0A3", strokeWidth: 3 }),
            Go(go.TextBlock, textStyle(),
              {
                margin: 8,
                maxSize: new go.Size(200, NaN),
                wrap: go.TextBlock.WrapFit,
                textAlign: "center",
                editable: true
              },
              new go.Binding("text").makeTwoWay())
            // no ports, because no links are allowed to connect with a comment
          )
        );
  
        // replace the default Link template in the linkTemplateMap
        myDiagram.linkTemplate =
          Go(go.Link,  // the whole link panel
            {
              routing: go.Link.AvoidsNodes,
              curve: go.Link.JumpOver,
              corner: 5, toShortLength: 4,
              relinkableFrom: true,
              relinkableTo: true,
              reshapable: true,
              resegmentable: true,
              // mouse-overs subtly highlight links:
              mouseEnter: function(e, link) { link.findObject("HIGHLIGHT").stroke = "rgba(30,144,255,0.2)"; },
              mouseLeave: function(e, link) { link.findObject("HIGHLIGHT").stroke = "transparent"; },
              selectionAdorned: false
            },
            new go.Binding("points").makeTwoWay(),
            Go(go.Shape,  // the highlight shape, normally transparent
              { isPanelMain: true, strokeWidth: 8, stroke: "transparent", name: "HIGHLIGHT" }),
            Go(go.Shape,  // the link path shape
              { isPanelMain: true, stroke: "gray", strokeWidth: 2 },
              new go.Binding("stroke", "isSelected", function(sel) { return sel ? "dodgerblue" : "gray"; }).ofObject()),
            Go(go.Shape,  // the arrowhead
              { toArrow: "standard", strokeWidth: 0, fill: "gray" }),
            Go(go.Panel, "Auto",  // the link label, normally not visible
              { visible: false, name: "LABEL", segmentIndex: 2, segmentFraction: 0.5 },
              new go.Binding("visible", "visible").makeTwoWay(),
              Go(go.Shape, "RoundedRectangle",  // the label shape
                { fill: "#F8F8F8", strokeWidth: 0 }), //#cdcfd3; for blank background
              Go(go.TextBlock, "Yes",  // the label
                {
                  textAlign: "center",
                  font: "7pt helvetica, arial, sans-serif",
                  stroke: "red",
                  editable: true
                },
                new go.Binding("text").makeTwoWay())
            )
          );
  
        myDiagram.groupTemplate =
          Go(go.Group, "Auto",
            {
              layout: Go(go.GridLayout,
                { comparer: go.GridLayout.smartComparer,
                  wrappingColumn: 3 })
              // other properties are set by the layout function, defined below
            },
            Go(go.Shape, "Rectangle",
              { fill: "#8b8f99", stroke: "black", strokeWidth: 2 },
              new go.Binding("fill"), //need
              new go.Binding("stroke", "edge_stroke")), //need
            Go(go.Panel, "Vertical",
              { defaultAlignment: go.Spot.Left, margin: 2 },
              Go(go.Panel, "Horizontal",
                { defaultAlignment: go.Spot.Top },
                // the SubGraphExpanderButton is a panel that functions as a button to expand or collapse the subGraph
                Go("SubGraphExpanderButton"),
                Go(go.TextBlock,
                  { font: "Bold 10px Sans-Serif", stroke: "white", margin: 4, background: "white", wrap: go.TextBlock.WrapFit,
                  editable: true },
                  new go.Binding("stroke", "font_stroke"), //need
                  new go.Binding("text").makeTwoWay())  //need
              ),
              // create a placeholder to represent the area where the contents of the group are
              Go(go.Placeholder,
                { padding: new go.Margin(0, 5) })
            ),  // end Vertical Panel
            makePort("T", go.Spot.Top, go.Spot.TopSide, true, true),
            makePort("L", go.Spot.Left, go.Spot.Left, true, true),
            makePort("R", go.Spot.Right, go.Spot.Right, true, true),
            makePort("B", go.Spot.Bottom, go.Spot.Bottom, true, true)
          );  // end Group
  
        // Make link labels visible if coming out of a "conditional" node.
        // This listener is called by the "LinkDrawn" and "LinkRelinked" DiagramEvents.
        function showLinkLabel(e) {
          var label = e.subject.findObject("LABEL");
          if (label !== null) label.visible = true;
          //label.visible = true;
          //TODO
          // if (label !== null) label.visible = (e.subject.fromNode.data.category === "Conditional");
        }
  
        // temporary links used by LinkingTool and RelinkingTool are also orthogonal:
        myDiagram.toolManager.linkingTool.temporaryLink.routing = go.Link.Orthogonal;
        myDiagram.toolManager.relinkingTool.temporaryLink.routing = go.Link.Orthogonal;
  
        //initload();  // load an initial diagram from some JSON text
  
        // initialize the Palette that is on the left side of the page
        myPalette =
          Go(go.Palette, "myPaletteDiv",  // must name or refer to the DIV HTML element
            {
              // Instead of the default animation, use a custom fade-down
              "animationManager.initialAnimationStyle": go.AnimationManager.None,
              "InitialAnimationStarting": animateFadeDown, // Instead, animate with this function
  
              nodeTemplateMap: myDiagram.nodeTemplateMap,  // share the templates used by myDiagram
              model: new go.GraphLinksModel([  // specify the contents of the Palette
                { category: "Start", text: "Start", "fill":"#8b8f99", "edge_stroke":"#dd3218", "font_stroke":"#F8F8F8" },
                { text: "text", "fill":"#8b8f99", "edge_stroke":"#dd3218", "font_stroke":"#F8F8F8" },
                { category: "RedText", text:"RedText", "fill":"#8b8f99", "edge_stroke":"#dd3218", "font_stroke":"#F8F8F8" },
                { category: "ImageBlock", source: "http://res.cloudinary.com/du0tbys9q/image/upload/v1597629274/djiytxhwyhnoiuukqj2k.png", "fill":"#8b8f99", "edge_stroke":"#dd3218", "font_stroke":"#F8F8F8" },
                { category: "VideoBlock", source: "https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fbanner2.kisspng.com%2F20180410%2Fjfe%2Fkisspng-youtube-play-button-computer-icons-clip-art-youtube-5acd2517807855.3866683515233938155262.jpg&f=1&nofb=1", video_source:"", "fill":"#8b8f99", "edge_stroke":"#dd3218", "font_stroke":"#F8F8F8" },
                { category: "Comment", text: "Comment", "fill":"#8b8f99", "edge_stroke":"#dd3218", "font_stroke":"#F8F8F8" }
              ])
            }
          );
  
        // This is a re-implementation of the default animation, except it fades in from downwards, instead of upwards.
        function animateFadeDown(e) {
          var diagram = e.diagram;
          var animation = new go.Animation();
          animation.isViewportUnconstrained = true; // So Diagram positioning rules let the animation start off-screen
          animation.easing = go.Animation.EaseOutExpo;
          animation.duration = 900;
          // Fade "down", in other words, fade in from above
          animation.add(diagram, 'position', diagram.position.copy().offset(0, 200), diagram.position);
          animation.add(diagram, 'opacity', 0, 1);
          animation.start();
        }
          
        function shiftGroups() {  // define a function named "shiftNode" callable by button.onclick
          // all model changes should happen in a transaction
          myDiagram.commit(function(d) {
            var nodes = d.model.nodeDataArray;  // get the first node data
            for (var i = 0; i < nodes.length; i++) {
              if (nodes[i] && nodes[i]['isGroup'] == true) {
                var node = d.findNodeForData(nodes[i]);   // find the corresponding Node
                var p = node.location.copy();  // make a copy of the location, a Point
                p.x += 10;
                p.y += 10;
                // changing the Node.location also changes the data.loc property due to TwoWay binding
                node.location = p;
              }
            }
            // show the updated location held by the "loc" property of the node data
          }, "shift node");
        }
  
        /* Load the Ace editor & shirt noads */
        function initLoad() {
          var json = { "class": "GraphLinksModel",
  "nodeDataArray": [ 
{"category":"Start", "text":"Start", "fill":"#8b8f99", "edge_stroke":"#dd3218", "font_stroke":"#F8F8F8", "key":-1, "loc":"267.01019568801485 101.11111624258493"},
{"category":"ImageBlock", "source":"https://res.cloudinary.com/du0tbys9q/image/upload/v1601350611/Graphics/Engineering/Screen_Shot_2020-09-18_at_12.46.43_PM.png", "fill":"#8b8f99", "edge_stroke":"#dd3218", "font_stroke":"#f8f8f8", "key":-4, "loc":"410.01019568801485 101.11111624258493", "text":""},
{"category":"ImageBlock", "source":"https://res.cloudinary.com/du0tbys9q/image/upload/v1601350611/Graphics/Engineering/Screen_Shot_2020-09-18_at_12.48.01_PM.png", "fill":"#8b8f99", "edge_stroke":"#dd3218", "font_stroke":"#f8f8f8", "key":-3, "loc":"503.01019568801485 101.11111624258493", "text":""},
{"category":"ImageBlock", "source":"https://res.cloudinary.com/du0tbys9q/image/upload/v1601350763/Graphics/Engineering/Screen_Shot_2020-09-18_at_12.46.43_PMdsfs.png", "fill":"#8b8f99", "edge_stroke":"#dd3218", "font_stroke":"#f8f8f8", "key":-5, "loc":"611.0101956880148 101.11111624258493", "text":""},
{"category":"ImageBlock", "source":"https://res.cloudinary.com/du0tbys9q/image/upload/v1601350805/Graphics/Engineering/Screen_Shot_2020-09-18_at_12.58.53_PM.png", "fill":"#8b8f99", "edge_stroke":"#dd3218", "font_stroke":"#f8f8f8", "key":-6, "loc":"611.0101956880148 161.5652642959381", "text":""},
{"category":"ImageBlock", "source":"https://res.cloudinary.com/du0tbys9q/image/upload/v1601351022/Graphics/Engineering/Screen_Shot_2020-09-18_at_12.59.22_PM.png", "fill":"#8b8f99", "edge_stroke":"#dd3218", "font_stroke":"#f8f8f8", "key":-7, "loc":"611.0101956880148 198.97356040264447", "text":""},
{"category":"ImageBlock", "source":"https://res.cloudinary.com/du0tbys9q/image/upload/v1601351110/Graphics/Engineering/Screen_Shot_2020-09-18_at_12.55.24_PM.png", "fill":"#8b8f99", "edge_stroke":"#dd3218", "font_stroke":"#f8f8f8", "key":-8, "loc":"710.0101956880148 101.11111624258493", "text":""},
{"category":"ImageBlock", "source":"https://res.cloudinary.com/du0tbys9q/image/upload/v1601351222/Graphics/Engineering/Screen_Shot_2020-09-18_at_2.40.28_PM.png", "fill":"#8b8f99", "edge_stroke":"#dd3218", "font_stroke":"#f8f8f8", "key":-9, "loc":"710.0101956880148 138.5194123492913", "text":""},
{"category":"ImageBlock", "source":"https://res.cloudinary.com/du0tbys9q/image/upload/v1601351529/Graphics/Engineering/IMG_0103.jpg", "fill":"#8b8f99", "edge_stroke":"#dd3218", "font_stroke":"#f8f8f8", "key":-10, "loc":"710.0101956880148 175.92770845599765", "text":""},
{"category":"ImageBlock", "source":"https://res.cloudinary.com/du0tbys9q/image/upload/v1601351675/Graphics/Engineering/Screen_Shot_2020-09-18_at_12.41.44_PM.png", "fill":"#8b8f99", "edge_stroke":"#dd3218", "font_stroke":"#f8f8f8", "key":-11, "loc":"797.3124923706055 101.11111624258493", "text":""},
{"category":"ImageBlock", "source":"https://res.cloudinary.com/du0tbys9q/image/upload/v1601351735/Graphics/Engineering/Screen_Shot_2020-09-18_at_1.05.06_PM.png", "fill":"#8b8f99", "edge_stroke":"#dd3218", "font_stroke":"#f8f8f8", "key":-12, "loc":"867.3124923706055 101.11111624258493", "text":""},
{"text":"Frequency Response", "fill":"#8b8f99", "edge_stroke":"#dd3218", "font_stroke":"#F8F8F8", "key":-2, "loc":"726.115975523498 278.7523051177493"},
{"text":"Transient Response [%OS, Dampening Ratio, Ts, Tp]", "fill":"#8b8f99", "edge_stroke":"#dd3218", "font_stroke":"#F8F8F8", "key":-13, "loc":"463.9478976983773 252.7523051177493"},
{"text":"Steady State - Steady State Error", "fill":"#8b8f99", "edge_stroke":"#dd3218", "font_stroke":"#F8F8F8", "key":-14, "loc":"935.3564959716796 393.11111624258496"},
{"text":"1st Order Response", "fill":"#8b8f99", "edge_stroke":"#dd3218", "font_stroke":"#f8f8f8", "key":-15, "loc":"362.1673713830663 365.5094123492912"},
{"text":"2nd Order Response (3 different cases)", "fill":"#8b8f99", "edge_stroke":"#dd3218", "font_stroke":"#F8F8F8", "key":-16, "loc":"557.3583105203072 373.4471366534905"},
{"category":"ImageBlock", "source":"https://res.cloudinary.com/du0tbys9q/image/upload/v1601352446/Graphics/Engineering/first-order/Screen_Shot_2020-09-18_at_2.14.59_PM.png", "fill":"#8b8f99", "edge_stroke":"#dd3218", "font_stroke":"#f8f8f8", "key":-17, "loc":"326.52661943716885 448", "text":""},
{"category":"ImageBlock", "source":"https://res.cloudinary.com/du0tbys9q/image/upload/v1601352446/Graphics/Engineering/first-order/Screen_Shot_2020-09-18_at_2.08.08_PM.png", "fill":"#8b8f99", "edge_stroke":"#dd3218", "font_stroke":"#f8f8f8", "key":-18, "loc":"326.52661943716885 485.4082961067064", "text":""},
{"category":"ImageBlock", "source":"https://res.cloudinary.com/du0tbys9q/image/upload/v1601352446/Graphics/Engineering/first-order/Screen_Shot_2020-09-18_at_2.07.40_PM.png", "fill":"#8b8f99", "edge_stroke":"#dd3218", "font_stroke":"#f8f8f8", "key":-19, "loc":"326.52661943716885 522.8165922134128", "text":""},
{"category":"ImageBlock", "source":"https://res.cloudinary.com/du0tbys9q/image/upload/v1601352552/Graphics/Engineering/Screen_Shot_2020-09-18_at_12.38.21_PM.png", "fill":"#8b8f99", "edge_stroke":"#dd3218", "font_stroke":"#f8f8f8", "key":-20, "loc":"879.5700386033897 493.25", "text":""},
{"category":"ImageBlock", "source":"https://res.cloudinary.com/du0tbys9q/image/upload/v1601352678/Graphics/Engineering/steadystate/Screen_Shot_2020-09-18_at_3.49.16_PM.png", "fill":"#8b8f99", "edge_stroke":"#dd3218", "font_stroke":"#f8f8f8", "key":-21, "loc":"991.5700386033897 493.25", "text":""},
{"category":"ImageBlock", "source":"https://res.cloudinary.com/du0tbys9q/image/upload/v1601352678/Graphics/Engineering/steadystate/Screen_Shot_2020-09-18_at_3.51.50_PM.png", "fill":"#8b8f99", "edge_stroke":"#dd3218", "font_stroke":"#f8f8f8", "key":-22, "loc":"1027.1028861016975 548.75", "text":""},
{"category":"ImageBlock", "source":"https://res.cloudinary.com/du0tbys9q/image/upload/v1601352678/Graphics/Engineering/steadystate/Screen_Shot_2020-09-18_at_3.52.51_PM.png", "fill":"#8b8f99", "edge_stroke":"#dd3218", "font_stroke":"#f8f8f8", "key":-23, "loc":"1062.6357336000056 548.75", "text":""},
{"category":"ImageBlock", "source":"https://res.cloudinary.com/du0tbys9q/image/upload/v1601352678/Graphics/Engineering/steadystate/Screen_Shot_2020-09-18_at_3.50.24_PM.png", "fill":"#8b8f99", "edge_stroke":"#dd3218", "font_stroke":"#f8f8f8", "key":-24, "loc":"991.5700386033897 548.75", "text":""},
{"category":"ImageBlock", "source":"https://res.cloudinary.com/du0tbys9q/image/upload/v1601352863/Graphics/Engineering/steadystate/Screen_Shot_2020-09-18_at_3.54.34_PM.png", "fill":"#8b8f99", "edge_stroke":"#dd3218", "font_stroke":"#f8f8f8", "key":-25, "loc":"991.5700386033897 643.2248883201192", "text":""},
{"category":"ImageBlock", "source":"https://res.cloudinary.com/du0tbys9q/image/upload/v1601352863/Graphics/Engineering/steadystate/Screen_Shot_2020-09-18_at_3.54.34_PdsfM.png", "fill":"#8b8f99", "edge_stroke":"#dd3218", "font_stroke":"#f8f8f8", "key":-26, "loc":"991.5700386033897 595.8165922134128", "text":""},
{"category":"ImageBlock", "source":"https://res.cloudinary.com/du0tbys9q/image/upload/v1601353120/Graphics/Engineering/second-order/Screen_Shot_2020-09-18_at_2.30.02_PM.png", "fill":"#8b8f99", "edge_stroke":"#dd3218", "font_stroke":"#f8f8f8", "key":-27, "loc":"587.698031589643 516", "text":""},
{"category":"ImageBlock", "source":"https://res.cloudinary.com/du0tbys9q/image/upload/v1601353120/Graphics/Engineering/second-order/Screen_Shot_2020-09-18_at_2.30.22_PM.png", "fill":"#8b8f99", "edge_stroke":"#dd3218", "font_stroke":"#f8f8f8", "key":-28, "loc":"622.950676853315 516", "text":""},
{"category":"ImageBlock", "source":"https://res.cloudinary.com/du0tbys9q/image/upload/v1601353310/Graphics/Engineering/second-order/Screen_Shot_2020-09-18_at_2.31.26_PM.png", "fill":"#8b8f99", "edge_stroke":"#dd3218", "font_stroke":"#f8f8f8", "key":-29, "loc":"491.57003860338966 463", "text":""},
{"category":"ImageBlock", "source":"https://res.cloudinary.com/du0tbys9q/image/upload/v1601353314/Graphics/Engineering/second-order/Screen_Shot_2020-09-18_at_2.31.43_PM.png", "fill":"#8b8f99", "edge_stroke":"#dd3218", "font_stroke":"#f8f8f8", "key":-30, "loc":"527.1028861016975 463", "text":""},
{"category":"ImageBlock", "source":"https://res.cloudinary.com/du0tbys9q/image/upload/v1601353563/Graphics/Engineering/rootlocus/Screen_Shot_2020-09-18_at_3.27.31_PM.png", "fill":"#8b8f99", "edge_stroke":"#dd3218", "font_stroke":"#f8f8f8", "key":-31, "loc":"491.57003860338966 586.1582961067064", "text":""},
{"category":"ImageBlock", "source":"https://res.cloudinary.com/du0tbys9q/image/upload/v1601353568/Graphics/Engineering/rootlocus/Screen_Shot_2020-09-18_at_3.28.31_PM.png", "fill":"#8b8f99", "edge_stroke":"#dd3218", "font_stroke":"#f8f8f8", "key":-32, "loc":"491.57003860338966 623.5665922134128", "text":""},
{"category":"ImageBlock", "source":"https://res.cloudinary.com/du0tbys9q/image/upload/v1601353572/Graphics/Engineering/rootlocus/Screen_Shot_2020-09-18_at_3.28.52_PM.png", "fill":"#8b8f99", "edge_stroke":"#dd3218", "font_stroke":"#f8f8f8", "key":-33, "loc":"491.57003860338966 653.6331844268257", "text":""},
{"text":"Root Locus", "fill":"#8b8f99", "edge_stroke":"#dd3218", "font_stroke":"#F8F8F8", "key":-34, "loc":"436.7636448655967 523.3115922134128"}
 ],
  "linkDataArray": [ 
{"from":-1, "to":-4, "visible":false, "points":[308.76019568801485,101.11111624258493,318.76019568801485,101.11111624258493,350.50198381343785,101.11111624258493,350.50198381343785,101.11111624258493,382.2437719388609,101.11111624258493,392.2437719388609,101.11111624258493], "text":""},
{"from":-4, "to":-3, "visible":false, "points":[427.77661943716885,101.11111624258493,437.77661943716885,101.11111624258493,456.51019568801485,101.11111624258493,456.51019568801485,101.11111624258493,475.2437719388609,101.11111624258493,485.2437719388609,101.11111624258493], "text":""},
{"from":-3, "to":-5, "visible":false, "points":[520.7766194371688,101.11111624258493,530.7766194371688,101.11111624258493,557.0101956880148,101.11111624258493,557.0101956880148,101.11111624258493,583.2437719388608,101.11111624258493,593.2437719388608,101.11111624258493], "text":""},
{"from":-5, "to":-6, "visible":false, "points":[611.0101956880148,119.81526429593814,611.0101956880148,129.81526429593814,611.0101956880148,131.33819026926153,611.0101956880148,131.33819026926153,611.0101956880148,132.86111624258493,611.0101956880148,142.86111624258493], "text":""},
{"from":-5, "to":-8, "visible":false, "points":[628.7766194371688,101.11111624258493,638.7766194371688,101.11111624258493,660.5101956880148,101.11111624258493,660.5101956880148,101.11111624258493,682.2437719388608,101.11111624258493,692.2437719388608,101.11111624258493], "text":""},
{"from":-8, "to":-11, "visible":false, "points":[727.7766194371688,101.11111624258493,737.7766194371688,101.11111624258493,753.6613440293102,101.11111624258493,753.6613440293102,101.11111624258493,769.5460686214515,101.11111624258493,779.5460686214515,101.11111624258493], "text":""},
{"from":-11, "to":-12, "visible":false, "points":[815.0789161197595,101.11111624258493,825.0789161197595,101.11111624258493,832.3124923706055,101.11111624258493,832.3124923706055,101.11111624258493,839.5460686214515,101.11111624258493,849.5460686214515,101.11111624258493], "text":""},
{"from":-2, "to":-13, "visible":false, "points":[640.717100602469,278.7523051177493,630.717100602469,278.7523051177493,592.7932052266603,278.7523051177493,592.7932052266603,252.7523051177493,554.8693098508516,252.7523051177493,544.8693098508516,252.7523051177493], "text":""},
{"from":-2, "to":-14, "visible":false, "points":[811.5148504445269,278.7523051177493,821.5148504445269,278.7523051177493,830.5304595329892,278.7523051177493,830.5304595329892,393.11111624258496,839.5460686214514,393.11111624258496,849.5460686214514,393.11111624258496], "text":""},
{"from":-13, "to":-15, "visible":false, "points":[463.9478976983773,287.82690177950093,463.9478976983773,297.82690177950093,463.9478976983773,317.06858303771946,362.1673713830663,317.06858303771946,362.1673713830663,336.31026429593805,362.1673713830663,346.31026429593805], "text":""},
{"from":-13, "to":-16, "visible":false, "points":[463.9478976983773,287.82690177950093,463.9478976983773,297.82690177950093,463.9478976983773,317.06858303771946,557.3583105203072,317.06858303771946,557.3583105203072,336.31026429593805,557.3583105203072,346.31026429593805], "text":""},
{"from":-15, "to":-17, "visible":false, "points":[362.1673713830663,384.7085604026444,362.1673713830663,394.7085604026444,362.1673713830663,407.0022061746456,326.5266194371688,407.0022061746456,326.5266194371688,419.2958519466468,326.5266194371688,429.2958519466468], "text":""},
{"from":-14, "to":-20, "visible":false, "points":[935.3564959716796,420.2479886001374,935.3564959716796,430.2479886001374,935.3564959716796,447.3969202733921,879.5700386033897,447.3969202733921,879.5700386033897,464.54585194664685,879.5700386033897,474.54585194664685], "text":""},
{"from":-14, "to":-21, "visible":false, "points":[935.3564959716796,420.2479886001374,935.3564959716796,430.2479886001374,935.3564959716796,447.3969202733921,991.5700386033897,447.3969202733921,991.5700386033897,464.54585194664685,991.5700386033897,474.54585194664685], "text":""},
{"from":-21, "to":-24, "visible":false, "points":[991.5700386033897,511.9541480533532,991.5700386033897,521.9541480533533,991.5700386033897,521.9541480533533,991.5700386033897,520.0458519466468,991.5700386033897,520.0458519466468,991.5700386033897,530.0458519466468], "text":""},
{"from":-24, "to":-26, "visible":false, "points":[991.5700386033897,567.4541480533533,991.5700386033897,577.4541480533533,991.5700386033897,577.4541480533533,991.5700386033897,567.1124441600597,991.5700386033897,567.1124441600597,991.5700386033897,577.1124441600597], "text":""},
{"from":-26, "to":-25, "visible":false, "points":[991.5700386033897,614.5207402667661,991.5700386033897,624.5207402667661,991.5700386033897,624.5207402667661,991.5700386033897,614.5207402667661,991.5700386033897,614.5207402667661,991.5700386033897,624.5207402667661], "text":""},
{"from":-16, "to":-29, "visible":false, "points":[557.3583105203072,400.5840090110429,557.3583105203072,410.5840090110429,557.3583105203072,422.4399304788449,491.57003860338966,422.4399304788449,491.57003860338966,434.2958519466468,491.57003860338966,444.2958519466468], "text":""},
{"from":-16, "to":-27, "visible":false, "points":[557.3583105203072,400.5840090110429,557.3583105203072,410.5840090110429,557.3583105203072,448.9399304788449,587.698031589643,448.9399304788449,587.698031589643,487.29585194664685,587.698031589643,497.29585194664685], "text":""},
{"from":-29, "to":-34, "visible":false, "points":[491.57003860338966,481.70414805335315,491.57003860338966,491.70414805335315,491.57003860338966,492.9082961067064,436.7636448655967,492.9082961067064,436.7636448655967,494.1124441600597,436.7636448655967,504.1124441600597], "text":""},
{"from":-34, "to":-31, "visible":false, "points":[436.7636448655967,542.5107402667661,436.7636448655967,552.5107402667661,436.7636448655967,554.9824441600597,491.57003860338966,554.9824441600597,491.57003860338966,557.4541480533533,491.57003860338966,567.4541480533533], "text":""},
{"from":-10, "to":-2, "visible":false, "points":[710.0101956880148,194.63185650935085,710.0101956880148,204.63185650935085,710.0101956880148,227.0925067868735,726.115975523498,227.0925067868735,726.115975523498,249.55315706439615,726.115975523498,259.55315706439615], "text":""},
{"from":-11, "to":-2, "visible":false, "points":[797.3124923706055,119.81526429593814,797.3124923706055,129.81526429593814,797.3124923706055,132,797.3124923706055,132,797.3124923706055,204,726.115975523498,204,726.115975523498,249.55315706439615,726.115975523498,259.55315706439615], "text":""}
 ]};
          myDiagram.model = go.Model.fromJson(json);
          var editor = ace.edit("editor");
          editor.setTheme("ace/theme/monokai");
          editor.getSession().setMode("ace/mode/javascript");
          editor.setValue(JSON.stringify(json, null, 2));
          // document.getElementById("mySavedModel").value = JSON.stringify(json, null, 2);
          myDiagram.commandHandler.zoomToFit();
          myDiagram.select(myDiagram.nodes.first());
          //shiftGroups();  // initialize everything
        }
        initLoad()
      } //   ||=========  END INIT ========||
      init();
  
      // print the diagram by opening a new window holding SVG images of the diagram contents for each page
      function printDiagram() {
        var svgWindow = window.open();
        if (!svgWindow) return;  // failure to open a new Window
        var printSize = new go.Size(700, 960);
        var bnds = myDiagram.documentBounds;
        var x = bnds.x;
        var y = bnds.y;
        while (y < bnds.bottom) {
          while (x < bnds.right) {
            var svg = myDiagram.makeSVG({ scale: 1.0, position: new go.Point(x, y), size: printSize });
            svgWindow.document.body.appendChild(svg);
            x += printSize.width;
          }
          x = bnds.x;
          y += printSize.height;
        }
        setTimeout(function() { svgWindow.print(); }, 1);
      }
   
      /*  Inspector  */
      var inspector = new Inspector('myInspectorDiv', myDiagram, {
        // allows for multiple nodes to be inspected at once
        multipleSelection: true,
        // max number of node properties will be shown when multiple selection is true
        showSize: 4,
        // when multipleSelection is true, when showAllProperties is true it takes the union of properties
        // otherwise it takes the intersection of properties
        showAllProperties: true,
        // uncomment this line to only inspect the named properties below instead of all properties on each object:
        // includesOwnProperties: false,
        properties: {
          "text": {},
          // key would be automatically added for nodes, but we want to declare it read-only also:
          "key": { readOnly: true, show: Inspector.showIfPresent },
          "video_source": { show: Inspector.showIfPresent},
          "source": { show: Inspector.showIfPresent},
          // color would be automatically added for nodes, but we want to declare it a color also:
          "fill": { show: Inspector.showIfPresent, type: 'color' },
          // "fill": { show: Inspector.showIfPresent, type: 'color' },
          "edge_stroke": { show: Inspector.showIfPresent, type: 'color' },
          "font_stroke": { show: Inspector.showIfPresent, type: 'color' },
          // Comments and LinkComments are not in any node or link data (yet), so we add them here:
          "Comments": { show: Inspector.showIfPresent },
          //"LinkComments": { show: Inspector.showIfLink },
          "isGroup": { readOnly: true, show: Inspector.showIfPresent },
          //"flag": { show: Inspector.showIfNode, type: 'checkbox' },
          "visible": {
            show: Inspector.showIfPresent,
            type: "select",
            choices: function(node, propName) {
              //if (Array.isArray(node.data.choices)) return node.data.choices;
              return [true, false];
            }
          }
        }
      });
    });//  ||======  END DOCUMENT.READY()  ======||
  
  
    //  =====   STATIC BUTTON FUNCTIONS   ====== 
  
    /* Load Button Function */
    function load() {
      //myDiagram.model = go.Model.fromJson(document.getElementById("mySavedModel").value);
      myDiagram.model = go.Model.fromJson(editor.getValue());
    }
  
    /* Show the diagram's model in JSON format that the user may edit */
    function save() {
      //document.getElementById("mySavedModel").value = myDiagram.model.toJson();
      editor.setValue(myDiagram.model.toJson());
      myDiagram.isModified = false;
      var objToday = new Date(),
      weekday = new Array('Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'),
      dayOfWeek = weekday[objToday.getDay()],
      domEnder = function() { var a = objToday; if (/1/.test(parseInt((a + "").charAt(0)))) return "th"; a = parseInt((a + "").charAt(1)); return 1 == a ? "st" : 2 == a ? "nd" : 3 == a ? "rd" : "th" }(),
      dayOfMonth = today + ( objToday.getDate() < 10) ? '0' + objToday.getDate() + domEnder : objToday.getDate() + domEnder,
      months = new Array('January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'),
      curMonth = months[objToday.getMonth()],
      curYear = objToday.getFullYear(),
      curHour = objToday.getHours() > 12 ? objToday.getHours() - 12 : (objToday.getHours() < 10 ? "0" + objToday.getHours() : objToday.getHours()),
      curMinute = objToday.getMinutes() < 10 ? "0" + objToday.getMinutes() : objToday.getMinutes(),
      curSeconds = objToday.getSeconds() < 10 ? "0" + objToday.getSeconds() : objToday.getSeconds(),
      curMeridiem = objToday.getHours() > 12 ? "PM" : "AM";
      var today = curHour + "-" + curMinute + "-" + curSeconds + curMeridiem + "_" + dayOfWeek + "_" + dayOfMonth + "_of_" + curMonth + "_" + curYear;
      download(today + '.json', myDiagram.model.toJson());
    }
  
    /* DownLoad Json File 
      - called by save() function */
    function download(filename, text) {
      var element = document.createElement('a');
      element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
      element.setAttribute('download', filename);
      element.style.display = 'none';
      document.body.appendChild(element);
      element.click();
      document.body.removeChild(element);
    }
  
  </script>

  {% include footer.html %}
  {% include javascripts.html %}
  <script src="{{ site.baseurl }}/assets/popup_assets_cp/javascripts/magnific-popup.js"></script>

</body>

</html>
